==Introduction==

This describes what needs to be done in order to do a basic install of FIXwiki.

Once this process is complete, the rest of the installation process can be 
completed from within the wiki itself by wiki users with the appropriate rights.

The basic sequence of tasks is:

# Install MediaWiki into a directory called "w".
# Configure MediaWiki with Wiki name = FIXwiki, a working contact email, 
MySQL as database, and the rest can default. 
In particular accept the default WikiSysop as
the admin user name (the build script uses this user name). Make sure that
you record the admin password that you specify. Note also that you need
to have a MySQL user name set up (using root is fine if you know it).
# Modify the standard MediaWiki LocalSettings.php so that it includes another 
file LocalSettings.inc. This file can start off blank. This involves adding the 
following as the last line in LocalSettings.php: include('LocalSettings.inc');
# Upload and unpack the [[#Extensions|extensions below]] into the wiki's 
"extensions" subdirectory
# Update the [[#Configuration|configuration]]
# Upload the [[#Data Files|data files]]
# Run the [[#Build Script|build script]]

Each of these tasks is described in more detail the following sections.

==Extensions==

* [http://www.mediawiki.org/wiki/Extension:ParserFunctions ParserFunctions]
* [http://www.mediawiki.org/wiki/Extension:MaintenanceShell MaintenanceShell]
* [http://www.mediawiki.org/wiki/Extension:SubPageList3 Subpage List3]
* [http://www.mediawiki.org/wiki/Extension:ConfirmEdit ConfirmEdit]

==Configuration==

Assumes that MediaWiki has been installed into a directory called "w".

Copy the complete LocalSettings.inc into the wiki's root directory (same directory as LocalSettings.php)

(Note that the $wgArticlePath and $wgUsePathInfo lines may cause
problems and need to be commented out until the rewriting is working).

Here is the current contents of LocalSettings.inc:

<pre>
<?php

#$wgReadOnly = "Backing up FIXwiki";

$wgEnableUploads = true;

#Enable short urls.
#The following only works if you have installed into "w" and if your Apache .htaccess file has the following lines in it:
#RewriteEngine On
#RewriteRule ^fixwiki/(.*)$ /w/index.php?title=$1 [PT,L,QSA]
#RewriteRule ^fixwiki/*$ /w/index.php [L,QSA]
$wgArticlePath = "/fixwiki/$1";
$wgUsePathInfo = true;


$wgUseAjax = true;
$wgEnableMWSuggest = true;
$wgLogo = "$wgScriptPath/images/cameronedge_logo_blue135trans.png";
$wgFavicon = "$wgScriptPath/images/favicon.ico";
$wgRightsIcon = "$wgScriptPath/images/cameronedge_logo_blueSmall.png";
$wgRightsUrl = "http://www.cameronedge.com/";
$wgRightsText = "FIXwiki copyrights";
$wgRightsPage = "FIXwiki:Copyrights";
$wgEmailConfirmToEdit = true;

$wgNamespacesWithSubpages[NS_MAIN] = true;
$wgNamespacesWithSubpages[NS_TALK] = true;
$wgNamespacesWithSubpages[NS_CATEGORY] = true;
$wgNamespacesWithSubpages[NS_CATEGORY_TALK] = true;

#Wiki requires login to read or edit
$wgGroupPermissions['*']['edit'] = false;
$wgGroupPermissions['*']['read'] = false;
$wgWhitelistRead = array(
  'FIXwiki',
  'FIXwiki:About',
  'FIXwiki:Copyrights',
  'FIXwiki:Structure',
  'FIXwiki:Use',
  'Special:RecentChanges',
  'MediaWiki:Common.css',
  'MediaWiki:Monobook.css',
  'MediaWiki:Modern.css',
  '-',
);

#Add FPL namespace
define("NS_FPL", 100);
define("NS_FPL_TALK", 101);
$wgExtraNamespaces = array(
  NS_FPL => 'FPL',
  NS_FPL_TALK => 'FPL_talk'
);

$wgNamespacesWithSubpages[NS_FPL] = true;
$wgNamespacesWithSubpages[NS_FPL_TALK] = true;

#Namespace protection
$wgNamespaceProtection[NS_PROJECT] = array('editinterface');
$wgNamespaceProtection[NS_FPL] = array('editinterface');
$wgNamespaceProtection[NS_TEMPLATE] = array('editinterface');
$wgNamespaceProtection[NS_HELP] = array('editinterface');
$wgNamespaceProtection[NS_CATEGORY] = array('editinterface');

$wgExternalLinkTarget = '_blank';

require_once( "$IP/extensions/ParserFunctions/ParserFunctions.php" );
require_once("$IP/extensions/SubPageList3/SubPageList3.php"); // for SubPageList3 extension

require_once( "$IP/extensions/recaptcha/ReCaptcha.php" );
#This is global key - generate a CameronEdge specific one.
$recaptcha_public_key = '6LdtuQcAAAAAAFB8LFXNfmMSkOtOowSNQrP1TbDx';
$recaptcha_private_key = '6LdtuQcAAAAAAFlf4sHg8L2QCq-ppRJoaCupFif_';

#Maintenance shell
# Sysops will have access to the MaintenanceShell
$wgGroupPermissions['sysop']['maintenanceshell'] = true;
 
#Place this on the VERY LAST line of your Localsettings.php file:
require_once("$IP/extensions/MaintenanceShell.0.2.2/MaintenanceShell.php");

</pre>

==Data Files==

These are generated automatically from the FIX repository and other sources by FIXwiki generation code. There are over 20,000 data files totalling about 90Mb.

This process assumes that these have already been generated and can be uploaded as a directory tree somewhere onto the server where the wiki is running.

These files will be imported into the wiki by running the [[#Build Script|build script]]

Contact John Cameron john.cameron@cameronedge.com for a copy of these files.

==Build Script==

buildFIXwiki.sh is located in the root directory of the [[#Data Files|data files]].

* It needs to be run from the wiki's "maintenance" subdirectory.
* It needs to be run by a user with full update access to wiki database.
* It can take around an hour to complete.

Command line is simply:

 sh <path to data files root directory>/buildFIXwiki.sh
